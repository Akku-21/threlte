# Conventions

Threlte components follow the principles of three.js whereever possible and useful in terms of available properties and events and their respective naming.

Most component properties are `undefined` by default. Therefore, new three.js objects are instantiated without any optional default values. This way, three.js will provide the defaults and threltes reactivity will _not_ kick in, allowing you to take complete control over objects.

On top of that, threlte adds some functionality to make objects even more reactive.

## lookAt <!-- omit in toc -->

Use the property `lookAt` on an Object to

- reactively orient an Object3D towards another Object3D

```svelte
<script>
  let mesh
</script>

<PerspectiveCamera lookAt={mesh} />
<Mesh bind:mesh â€¦ />
```

- to reactively orient an Object towards a Position

```svelte
<PerspectiveCamera lookAt={{ x: 5, y: 3 }} />
```

## Types

TypeScript users should install @types/three in order to get type support for three.js.

```bash
npm install -D @types/three
```

### Property Types

To make working with component props easier, threlte includes special types for position, scale, rotation and lookAt:

```ts
type Position = THREE.Vector3 | { x?: number; y?: number; z?: number }

const positionA = new Vector3()
const positionB = { x: 1, z: 1 }

type Scale = THREE.Vector3 | number | { x?: number; y?: number; z?: number }

const scaleA = new Vector3()
const scaleB = 2
const scaleC = { x: 1.5, z: 1 }

type Rotation = THREE.Euler | { x?: number; y?: number; z?: number; order?: THREE.Euler['order'] }

const rotationA = new Euler()
const rotationB = { x: 1.5, z: 1 }

type LookAt = THREE.Vector3 | { x?: number; y?: number; z?: number } | THREE.Object3D

const lookAtA = new Vector3()
const lookAtB = { x: 2, y: 3 }
const lookAtC = someMesh
```

### Context Types

The `<Canvas>` component provides two very useful contexts: `ThrelteContext` and `ThrelteRootContext`.  
See [`useThrelte`](/docs/hooks/useThrelte) and [`useThrelteRoot`](/docs/hooks/useThrelteRoot) on how to use these.

```ts
type ThrelteContext = {
  size: Readable<Size>
  pointer: Writable<Vector2>
  pointerOverCanvas: Writable<boolean>
  clock: Clock
  camera: Writable<Camera>
  scene: Scene
  renderer?: WebGLRenderer
  composer?: EffectComposer
  invalidate: (debugFrameloopMessage?: string) => void
}

type ThrelteRootContext = {
  setCamera: (camera: Camera) => void
  linear: Writable<boolean>
  flat: Writable<boolean>
  dpr: Writable<number>
  addPass: (pass: Pass) => void
  removePass: (pass: Pass) => void
  addRaycastableObject: (obj: Object3D) => void
  removeRaycastableObject: (obj: Object3D) => void
  addInteractiveObject: (obj: Object3D) => void
  removeInteractiveObject: (obj: Object3D) => void
  interactiveObjects: Set<Object3D>
  raycastableObjects: Set<Object3D>
  raycaster: Raycaster
  lastIntersection: Intersection<Object3D<Event>> | null
}
```
