---
import { Image } from '@astrojs/image/components'
import type { CollectionEntry } from 'astro:content'
import AppLayout from './AppLayout.astro'
import Logo from '$assets/logo/threlte-logo-only.png'
import LeftSidebar from '$components/Menu/LeftSidebar/LeftSidebar.astro'
import Socials from '$components/Socials/Socials.astro'
import RightSidebar from '$components/Menu/RightSidebar/RightSidebar.astro'

export interface Props {
  title?: string
  entry: CollectionEntry<'learn'> | CollectionEntry<'reference'>
}

const title = Astro.props.title
---

<AppLayout title={title}>
  <header
    class="border-b-orange/25 fixed z-50 mx-auto flex h-[80px] w-full flex-row items-center justify-between border-b bg-[#0D1421] px-6"
  >
    <a
      href="/"
      class="flex flex-row items-center gap-4"
    >
      <Image
        src={Logo}
        alt="threlte logo"
        width={200}
        class="w-[37px]"
      />

      <h2
        class="text-orange translate-y-px rounded-md border-2 border-orange-500 bg-orange-800/50 px-1.5 text-2xl font-bold"
      >
        DOCS
      </h2>
    </a>

    <div class="flex flex-row gap-5">
      <Socials />
    </div>
  </header>

  <main
    class="grid md:grid-cols-[var(--left-sidebar-width)_1fr] lg:grid-cols-[var(--left-sidebar-width)_1fr_var(--right-sidebar-width)]"
  >
    <aside
      class="fixed bottom-0 z-20 order-1 row-span-2 w-full place-self-start justify-self-stretch md:sticky md:top-[80px] md:z-0 md:mt-[var(--docs-navbar-height)] md:w-auto md:pt-6 lg:row-span-1"
    >
      <LeftSidebar />
    </aside>

    <div
      class="order-3 w-full justify-self-center overflow-x-auto px-6 pt-6 pb-12 lg:order-2 lg:mt-[var(--docs-navbar-height)]"
    >
      <article
        class="prose prose-a:text-orange before:prose-code:content-none after:prose-code:content-none prose-invert [&_p]:text-faded mx-auto max-w-5xl"
      >
        <slot />
      </article>
    </div>

    <aside
      class="sticky top-[calc(var(--docs-navbar-height)-5px)] z-10 order-2 mt-10 ml-4 w-full place-self-start justify-self-end bg-gradient-to-b from-[#0c1421] via-[#0c1421] pt-6 lg:z-0 lg:order-3 lg:mt-[calc(var(--docs-navbar-height)*1.2)] lg:bg-none"
    >
      <RightSidebar entry={Astro.props.entry} />
    </aside>
  </main>
</AppLayout>
